<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="images/brispace_favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Birthday Challenge Zone: Event Info</title>
    <link rel="stylesheet" href="css/geocities.css" />
    <link rel="stylesheet" href="css/components/navigation.css" />
    <link rel="stylesheet" href="css/components/leaderboard.css" />
    <link rel="stylesheet" href="css/components/forms.css" />
    <link rel="stylesheet" href="css/components/myspace.css" />
    <link rel="stylesheet" href="css/components/myspace-comments.css" />
    <link rel="stylesheet" href="css/components/event-card.css" />
    <link rel="stylesheet" href="css/components/submissions.css" />

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.2/firebase-auth-compat.js"></script>
  </head>
  <body>
    <!-- Navigation Component -->
    <nav class="site-navigation mobile-menu-default">
      <!-- Mobile Menu Toggle (always visible) -->
      <button class="mobile-menu-toggle" data-sound="menu" aria-label="Toggle navigation menu">
        <span class="hamburger-icon">‚ò∞</span>
      </button>
      <!-- Page Title / User Info -->
      <div class="nav-user-info">
        <div class="user-welcome">
          <span data-nav="page-title">Event Info</span>
          <img src="images/star_icon.gif" alt="star" class="icon-gif" />
        </div>
      </div>
      <!-- Navigation Menu (closed by default) -->
      <div class="nav-menu">
        <div class="nav-tabs">
          <a href="dashboard" class="nav-tab" data-sound="menu" data-page="dashboard">
            <img
              src="images/home.gif"
              alt="home"
              class="icon-gif icon-gif--lg icon-gif--with-text"
            />
            <span>DASHBOARD</span>
          </a>
          <a href="event-info" class="nav-tab active" data-sound="menu" data-page="event-info">
            <img src="images/question.gif" alt="info" class="icon-gif icon-gif--with-text" />
            <span>EVENT INFO</span>
          </a>
          <a
            href="challenges-submit"
            class="nav-tab"
            data-sound="menu"
            data-page="challenges-submit"
          >
            <img src="images/star_icon.gif" alt="star" class="icon-gif icon-gif--with-text" />
            <span>SUBMIT CHALLENGE</span>
          </a>
          <a href="leaderboard" class="nav-tab" data-sound="menu" data-page="leaderboard">
            <img src="images/trophy.gif" alt="trophy" class="icon-gif icon-gif--with-text" />
            <span>LEADERBOARD</span>
          </a>
          <a href="cocktail-judging" class="nav-tab" data-sound="menu" data-page="cocktail-judging">
            <img
              src="images/cocktail_stirrer.gif"
              alt="cocktail"
              class="icon-gif icon-gif--with-text"
            />
            <span>JUDGE COCKTAILS</span>
          </a>
          <a
            href="admin-approvals"
            class="nav-tab"
            data-sound="menu"
            data-page="admin-approvals"
            data-admin-only
            style="display: none"
          >
            <img src="images/star_icon.gif" alt="admin" class="icon-gif icon-gif--with-text" />
            <span>üîê ADMIN</span>
          </a>
          <button class="nav-tab logout-btn">
            <img
              src="images/logout.gif"
              alt="logout"
              class="icon-gif icon-gif--lg icon-gif--with-text"
            />
            <span>LOGOUT</span>
          </button>
        </div>
      </div>
    </nav>

    <!-- Welcome Marquee -->
    <!-- MySpace Profile Header -->
    <div class="myspace-header full-width-content">
      <div class="myspace-header__logo">
        <img src="images/brispace_logo.jpg" alt="brispace logo" />
      </div>
    </div>
    <div class="myspace-container full-width-content">
      <div class="container myspace-layout">
        <aside class="myspace-sidebar">
          <div class="myspace-section">
            <h2 class="myspace-name" id="myspaceName">&nbsp;</h2>
            <div class="myspace-profile-row">
              <img src="images/headshot.jpg" alt="Profile headshot" class="myspace-headshot" data-headshot="user-profile" />
              <div class="myspace-about">
              </div>
            </div>
          </div>
          <section class="event-details-card myspace-section">
            <div class="event-details-header">Event Details</div>
            <div class="event-details-list">
              <div class="event-details-row">
                <div class="event-details-label">Date</div>
                <div class="event-details-value">March 19-22, 2026</div>
              </div>
              <div class="event-details-row">
                <div class="event-details-label">Location</div>
                <div class="event-details-value">367 Compass St, Pacific Beach, WA 98571</div>
              </div>
              <div class="event-details-row">
                <div class="event-details-label">Themes</div>
                <div class="event-details-value">
                  2000's, Karaoke, Cocktails, Challenges, Friends, Fun
                </div>
              </div>
              <div class="event-details-row">
                <div class="event-details-label">Party Jams</div>
                <div class="event-details-value">
                  OutKast, TLC, Eminem, Nelly, Usher, Linkin Park, Blink-182, Sum 41, The Killers,
                  Fall Out Boy, My Chemical Romance, No Doubt, The White Stripes, Yeah Yeah Yeahs,
                  The Strokes, Red Hot Chili Peppers, Maroon 5, 50 Cent, Ja Rule, Ashanti, Shakira,
                  Evanescence, Foo Fighters, Incubus, System of a Down, Muse, The Offspring, Jimmy
                  Eat World, Gorillaz, Franz Ferdinand, Modest Mouse, Dashboard Confessional, Tegan
                  and Sara, Good Charlotte, Papa Roach, Jet, Alien Ant Farm, Lit, Puddle of Mudd,
                  Lifehouse, Coldplay, Snow Patrol, The All-American Rejects, Bowling For Soup, Reel
                  Big Fish, The Darkness, Coheed and Cambria, Yellowcard, Ashlee Simpson, Weezer
                </div>
              </div>
              <div class="event-details-row">
                <div class="event-details-label">Contact</div>
                <div class="event-details-value">briancama@gmail.com</div>
              </div>
            </div>
          </section>
          <div class="myspace-section"id="musicPlayerContainer"></div>
          <div class="myspace-section" >
            <img class="myspace-section-gif"src="images/iron-man.gif" data-gif-stepper data-steps-per-click="2">
          </div>
        </aside>
        <main class="myspace-main">
          <!-- Retro announcement banner -->
          <div class="myspace-section">
            <div class="retro-banner" id="retroBanner">
              <div class="retro-banner__gif">
                <img src="images/drink-banner-image.gif" alt="Register Cocktails" />
              </div>
              <div class="retro-banner__text">
                <div class="retro-banner__line" id="retroBannerText">40 Proof - Cocktail Contest</div>
              </div>
              <div class="retro-banner__gif">
                <img src="images/drink-banner.gif" alt="Register Cocktails" />
              </div>
            </div>
          </div>
          <div class="myspace-section">
            <h3>Schedule</h3>
            <ul id="eventSchedule" class="event-schedule">
              <p>Loading schedule...</p>
            </ul>
          </div>
          <div class="myspace-section myspace-guestbook">
            <h3>Event Comments</h3>
            <div class="myspace-comments-header">
              Displaying <span id="commentsCount">0</span> of
              <span id="commentsTotal">0</span> comments (<a href="#" id="viewAllComments"
                >Add Comment</a
              >)
            </div>
            <div class="myspace-comments-list" id="myspaceCommentsList">
              <p class="text-center">Loading comments...</p>
            </div>
            <div class="myspace-comments-actions">
              <a href="#" id="addCommentBtn" class="add-comment-link">Add Comment</a>
            </div>
            <!-- Modal for add/edit comment (reuses existing modal structure, hidden by default) -->
            <div id="guestbookModal" class="guestbook-modal" style="display: none">
              <div class="guestbook-modal-overlay"></div>
              <div class="guestbook-modal-content myspace-add-comment-modal">
                <button id="closeGuestbook" class="close-btn" aria-label="Close">‚úñÔ∏è</button>
                <h1 class="add-comment-title">Add Comment</h1>
                <div class="add-comment-subheader">Be nice.</div>
                <form id="class="guestbook-form">
                  <div class="form-group">
                    <label for="guestMessage" class="add-comment-label"><b>Your Comment:</b></label>
                    <textarea
                      id="guestMessage"
                      required
                      maxlength="200"
                      rows="6"
                      class="add-comment-textarea"
                    ></textarea>
                  </div>
                  <div class="add-comment-actions">
                    <button id="commentSubmit" type="button" class="add-comment-btn">Add Comment</button>
                    <button type="button" id="cancelGuestbook" class="cancel-comment-btn">
                      Cancel
                    </button>
                  </div>
                  <div id="guestbookError" class="error-message"></div>
                  <div id="guestbookSuccess" class="success-message"></div>
                </form>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    <script src="./js/components/gif-stepper.js"></script>
    <script type="module">
      import { navigationController } from "./js/components/navigation.js";
      import { appState } from "./js/app.js";
      import { EventInfoPage } from "./js/pages/event-info.js";
      import { firebaseAuth } from "./js/services/firebase-auth.js";
      import { CocktailEntryModal } from "./js/components/cocktail-entry-modal.js";

      // Global pattern: always initialize navigation and EventInfoPage
      navigationController.init();
      // Auth and redirect handled in EventInfoPage (BasePage)
      const page = new EventInfoPage();
      window.addEventListener("DOMContentLoaded", async () => {
        await page.init();

        // Initialize retro banner text rotation (existing behavior)
        try {
          const messages = [
            "40 Proof - Cocktail Contest",
            "Register Now",
          ];
          let idx = 0;
          const el = document.getElementById("retroBannerText");
          if (el) {
            el.textContent = messages[0];
            setInterval(() => {
              el.classList.add('hidden');
              setTimeout(() => {
                idx = (idx + 1) % messages.length;
                el.textContent = messages[idx];
                if (messages[idx] === 'Register Now') {
                  el.classList.add('cta-blink');
                } else {
                  el.classList.remove('cta-blink');
                }
                el.classList.remove('hidden');
              }, 320);
            }, 2600);
          }
        } catch (e) {
          console.warn('Retro banner init failed', e);
        }

        // Cocktail modal initialized in js/pages/event-info.js
      });
    </script>
    <!-- Add before closing </body> -->
    <bottom-menu></bottom-menu>
    <script type="module" src="js/components/bottom-menu.js"></script>
  </body>
</html>
